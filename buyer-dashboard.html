<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buyer Dashboard - Carbon Credit Exchange</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-brand">
        <span>üåø</span>
        <span>Buyer Dashboard</span>
      </div>
      <a href="index.html" class="logout-btn">Logout</a>
    </nav>

    <div class="dashboard-content">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-info">
            <h3>Your Carbon Credits</h3>
            <p id="buyerCredits">50</p>
          </div>
          <div class="stat-icon" style="background: #dbeafe; color: #2563eb">
            üåø
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-info">
            <h3>Total Purchases</h3>
            <p id="totalPurchases">0</p>
          </div>
          <div class="stat-icon" style="background: #d1fae5; color: #059669">
            üõí
          </div>
        </div>
      </div>

      <div class="section">
        <div class="marketplace-header">
          <h2 class="section-title" style="margin: 0">Marketplace</h2>
          <div class="search-box">
            <span>üîç</span>
            <input type="text" placeholder="Search credits..." />
          </div>
        </div>

        <div class="marketplace-grid" id="marketplace">
          <div
            class="marketplace-card"
            onclick="openPurchaseModal(1)"
            style="opacity: 100"
          >
            <div class="card-header">
              <div>
                <div class="card-title">Green Energy Co.</div>
                <span class="card-tag">Solar</span>
              </div>
              <span style="font-size: 1.5em; color: #10b981">‚úì</span>
            </div>
            <div class="card-info">
              <div class="info-row">
                <span class="info-label">Available Credits:</span>
                <span class="info-value">100</span>
              </div>
              <div class="info-row">
                <span class="info-label">Price per Credit:</span>
                <span class="info-value">$25</span>
              </div>
              <div class="info-row">
                <span class="info-label">Total:</span>
                <span class="total-price">$2,500</span>
              </div>
            </div>
            <button
              class="purchase-btn"
              onclick="event.stopPropagation(); openPurchaseModal(1)"
            >
              Purchase Credits
            </button>
          </div>

          <div
            class="marketplace-card"
            onclick="openPurchaseModal(2)"
            style="opacity: 100"
          >
            <div class="card-header">
              <div>
                <div class="card-title">Forest Preserve Inc.</div>
                <span class="card-tag">Reforestation</span>
              </div>
              <span style="font-size: 1.5em; color: #10b981">‚úì</span>
            </div>
            <div class="card-info">
              <div class="info-row">
                <span class="info-label">Available Credits:</span>
                <span class="info-value">250</span>
              </div>
              <div class="info-row">
                <span class="info-label">Price per Credit:</span>
                <span class="info-value">$30</span>
              </div>
              <div class="info-row">
                <span class="info-label">Total:</span>
                <span class="total-price">$7,500</span>
              </div>
            </div>
            <button
              class="purchase-btn"
              onclick="event.stopPropagation(); openPurchaseModal(2)"
            >
              Purchase Credits
            </button>
          </div>

          <div
            class="marketplace-card"
            onclick="openPurchaseModal(3)"
            style="opacity: 100"
          >
            <div class="card-header">
              <div>
                <div class="card-title">Wind Power Ltd.</div>
                <span class="card-tag">Wind Energy</span>
              </div>
              <span style="font-size: 1.5em; color: #10b981">‚úì</span>
            </div>
            <div class="card-info">
              <div class="info-row">
                <span class="info-label">Available Credits:</span>
                <span class="info-value">180</span>
              </div>
              <div class="info-row">
                <span class="info-label">Price per Credit:</span>
                <span class="info-value">$28</span>
              </div>
              <div class="info-row">
                <span class="info-label">Total:</span>
                <span class="total-price">$5,040</span>
              </div>
            </div>
            <button
              class="purchase-btn"
              onclick="event.stopPropagation(); openPurchaseModal(3)"
            >
              Purchase Credits
            </button>
          </div>
        </div>
      </div>

      <div class="section" id="purchaseHistorySection" style="display: none">
        <h2 class="section-title">Purchase History</h2>
        <div id="purchaseHistory"></div>
      </div>

      <div class="section">
        <h2 class="section-title">AI Suggestions</h2>
        <div class="ai-suggestion">
          <div class="ai-icon">
            <span style="font-size: 1.5em; color: white">üåø</span>
          </div>
          <div class="ai-content">
            <h3>Recommended Purchase</h3>
            <p>
              Based on your purchasing history and carbon offset goals, we
              recommend Forest Preserve Inc.'s reforestation credits. They offer
              the best value and align with your sustainability targets.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div id="purchaseModal" class="modal">
      <div class="modal-content">
        <h3 class="modal-title">Confirm Purchase</h3>
        <div style="margin-bottom: 25px">
          <div class="info-row" style="margin-bottom: 15px">
            <span class="info-label">Seller:</span>
            <span class="info-value" id="modalSeller"></span>
          </div>
          <div class="info-row" style="margin-bottom: 15px">
            <span class="info-label">Available Credits:</span>
            <span class="info-value" id="modalAvailable"></span>
          </div>
          <div class="form-group">
            <label class="form-label">Purchase Amount:</label>
            <input
              type="number"
              class="form-input"
              id="purchaseAmount"
              placeholder="Enter amount"
            />
          </div>
          <div
            class="info-row"
            style="
              margin-top: 20px;
              padding-top: 20px;
              border-top: 2px solid #e5e7eb;
            "
          >
            <span class="info-label" style="font-size: 1.1em">Total Cost:</span>
            <span class="total-price" id="modalTotal" style="font-size: 1.3em"
              >$0</span
            >
          </div>
        </div>
        <div class="modal-buttons">
          <button class="modal-btn confirm-btn" onclick="confirmPurchase()">
            Confirm
          </button>
          <button class="modal-btn cancel-btn" onclick="closeModal()">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <div id="notification" class="notification hidden">
      <span id="notificationIcon" style="font-size: 1.5em"></span>
      <span id="notificationMessage"></span>
    </div>

    <script src="buyer.js"></script>
  </body>
</html>
